FROM ubuntu:18.04
RUN apt-get -y update && apt-get -y install software-properties-common \
    && add-apt-repository ppa:deadsnakes/ppa && apt -y install python3.10

# need only for pre processing stage
# RUN apt-get install -y tesseract-ocr-rus poppler-utils tesseract-ocr

# RUN conda activate rag_hackathon
RUN apt-get -y install -y locales
RUN echo "en_US UTF-8" > /etc/locale.gen
RUN locale-gen en_US.UTF-8 && export LANG=en_US.UTF-8 && export LANGUAGE=en_US:en && export LC_ALL=en_US.UTF-8


RUN apt-get -y install python3-pip

RUN echo $(which python)
RUN echo "alias python=python3.10" >> ~/.bashrc

# Install requirements
# RUN update-alternatives --install /usr/bin/python3 python3 $(which python3.10) 1

# RUN python3.10 -m ensurepip
COPY requirements.txt .
RUN python3 -m pip install -r requirements.txt


# Copy app code
COPY . .

# Run streamlit
# CMD ["streamlit", "run", "bot.py"]
